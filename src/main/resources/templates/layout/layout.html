<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <th:block th:replace="fragment/header :: headerFragment"></th:block>
</head>
<body >
<div id="wrapper">
    <nav>
        <li>
            <button><a th:href="@{/signup}">회원가입</a></button>
            <button><a th:href="@{/signin}">로그인</a></button>
            <button onclick='logout()'>로그아웃</button>
            <button><a th:href="@{/}">글 목록</a></button>
        </li>
    </nav>
    <div id="content">
        <th:block layout:fragment="content"></th:block>
    </div>
</div>
<th:block th:replace="fragment/script :: script"></th:block>
<th:block layout:fragment="script"></th:block>

<script th:inline="javascript">

</script>

<script th:inline="javascript">
    // function logout(){
    //     if (localStorage.getItem('userId') != null) {
    //         localStorage.removeItem('userId');
    //         alert('로그아웃 완료');
    //     } else {
    //         alert('로그인하세요!');
    //     }
    // }
    function logout(){
        var userIdCookie = getCookie('userId');
        if (userIdCookie != "") {
            document.cookie = "userId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            alert('로그아웃 완료');
        } else {
            alert('로그인하세요!');
        }
    }

    function getCookie(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i = 0; i < ca.length; i++) {
            var c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return "";
    }
</script>
</body>
</html>